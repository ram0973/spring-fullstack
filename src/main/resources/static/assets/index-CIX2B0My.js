import{q as w,r as W,u as $,v as d,x as m,y as q,S as I}from"./index-6l_7SKQu.js";const x=w(function(e){return e.tagName==="audio"||e.tagName==="canvas"||e.tagName==="embed"||e.tagName==="iframe"||e.tagName==="img"||e.tagName==="math"||e.tagName==="object"||e.tagName==="picture"||e.tagName==="svg"||e.tagName==="video"}),O=new Set(["pingback","prefetch","stylesheet"]);function E(e){if(e.type!=="element"||e.tagName!=="link")return!1;if(e.properties.itemProp)return!0;const t=e.properties.rel;let r=-1;if(!Array.isArray(t)||t.length===0)return!1;for(;++r<t.length;)if(!O.has(String(t[r])))return!1;return!0}const F=w(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),M=w("meta");function T(e){return!!(e.type==="text"||F(e)||x(e)||E(e)||M(e)&&W(e,"itemProp"))}const j=["pre","script","style","textarea"],K=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],L=["button","input","select","textarea"],z=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],C={},k=$(["doctype","comment"]);function D(e){const r=V((e||C).newlines?R:U);return function(i){S(i,{collapse:r,whitespace:"normal"})}}function S(e,t){if("children"in e){const r={...t};return(e.type==="root"||P(e))&&(r.before=!0,r.after=!0),r.whitespace=X(e,t),H(e,r)}if(e.type==="text"){if(t.whitespace==="normal")return G(e,t);t.whitespace==="nowrap"&&(e.value=t.collapse(e.value))}return{ignore:k(e),stripAtStart:!1,remove:!1}}function G(e,t){const r=t.collapse(e.value),i={ignore:!1,stripAtStart:!1,remove:!1};let a=0,l=r.length;return t.before&&N(r.charAt(0))&&a++,a!==l&&N(r.charAt(l-1))&&(t.after?l--:i.stripAtStart=!0),a===l?i.remove=!0:e.value=r.slice(a,l),i}function H(e,t){let r=t.before;const i=t.after,a=e.children;let l=a.length,n=-1;for(;++n<l;){const s=S(a[n],{...t,after:A(a,n,i),before:r});s.remove?(a.splice(n,1),n--,l--):s.ignore||(r=s.stripAtStart),B(a[n])&&(r=!1)}return{ignore:!1,stripAtStart:!!(r||i),remove:!1}}function A(e,t,r){for(;++t<e.length;){const i=e[t];let a=J(i);if(a===void 0&&"children"in i&&!Q(i)&&(a=A(i.children,-1)),typeof a=="boolean")return a}return r}function J(e){if(e.type==="element"){if(B(e))return!1;if(P(e))return!0}else if(e.type==="text"){if(!d(e))return!1}else if(!k(e))return!1}function B(e){return x(e)||m(e,L)}function P(e){return m(e,K)}function Q(e){return!!(e.type==="element"&&e.properties.hidden)||k(e)||m(e,z)}function N(e){return e===" "||e===`
`}function R(e){const t=/\r?\n|\r/.exec(e);return t?t[0]:" "}function U(){return" "}function V(e){return t;function t(r){return String(r).replace(/[\t\n\v\f\r ]+/g,e)}}function X(e,t){if("tagName"in e&&e.properties)switch(e.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return e.properties.wrap?"pre-wrap":"pre";case"td":case"th":return e.properties.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}return t.whitespace}const Y={},Z=D({newlines:!0});function ee(e){const t=e||Y;let r=t.indent||2,i=t.indentInitial;return typeof r=="number"&&(r=" ".repeat(r)),i==null&&(i=!0),function(n){let s;Z(n),q(n,function(p,c){let f=-1;if(!("children"in p))return;if(m(p,"head")&&(s=!0),s&&m(p,"body")&&(s=void 0),m(p,j))return I;const u=p.children;let b=c.length;if(u.length===0||!v(p,s))return;i||b--;let y;for(;++f<u.length;){const o=u[f];(o.type==="text"||o.type==="comment")&&(o.value.includes(`
`)&&(y=!0),o.value=o.value.replace(/ *\n/g,"$&"+String(r).repeat(b)))}const h=[];let g;for(f=-1;++f<u.length;){const o=u[f];(v(o,s)||y&&!f)&&(a(h,b,o),y=!0),g=o,h.push(o)}g&&(y||v(g,s))&&(d(g)&&(h.pop(),g=h[h.length-1]),a(h,b-1)),p.children=h})};function a(n,s,p){const c=n[n.length-1],f=c&&d(c)?n[n.length-2]:c,u=(l(f)&&l(p)?`

`:`
`)+String(r).repeat(Math.max(s,0));c&&c.type==="text"?c.value=d(c)?u:c.value+u:n.push({type:"text",value:u})}function l(n){return!!(n&&n.type==="element"&&t.blanks&&t.blanks.length>0&&t.blanks.includes(n.tagName))}}function v(e,t){return e.type==="root"||(e.type==="element"?t||m(e,"script")||x(e)||!T(e):!1)}export{ee as default};
