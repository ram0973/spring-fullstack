import{o as Z,m as H,z as K}from"./index-DCY8qVec.js";function g(n,r){let e=-1,t;if(r.extensions)for(;++e<r.extensions.length;)g(n,r.extensions[e]);for(t in r)t==="extensions"||(t==="unsafe"||t==="join"?n[t]=[...n[t]||[],...r[t]||[]]:t==="handlers"?n[t]=Object.assign(n[t],r[t]||{}):n.options[t]=r[t]);return n}function W(n,r,e,t){const i=e.enter("blockquote"),u=e.createTracker(t);u.move("> "),u.shift(2);const o=e.indentLines(e.containerFlow(n,u.current()),X);return i(),o}function X(n,r,e){return">"+(e?"":" ")+n}function I(n,r){return A(n,r.inConstruct,!0)&&!A(n,r.notInConstruct,!1)}function A(n,r,e){if(typeof r=="string"&&(r=[r]),!r||r.length===0)return e;let t=-1;for(;++t<r.length;)if(n.includes(r[t]))return!0;return!1}function F(n,r,e,t){let i=-1;for(;++i<e.unsafe.length;)if(e.unsafe[i].character===`
`&&I(e.stack,e.unsafe[i]))return/[ \t]/.test(t.before)?"":" ";return`\\
`}function w(n,r){return!!(!r.options.fences&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function J(n){const r=n.options.fence||"`";if(r!=="`"&&r!=="~")throw new Error("Cannot serialize code with `"+r+"` for `options.fence`, expected `` ` `` or `~`");return r}function V(n,r,e,t){const i=J(e),u=n.value||"",o=i==="`"?"GraveAccent":"Tilde";if(w(n,e)){const s=e.enter("codeIndented"),h=e.indentLines(u,Y);return s(),h}const c=e.createTracker(t),a=i.repeat(Math.max(Z(u,i)+1,3)),l=e.enter("codeFenced");let f=c.move(a);if(n.lang){const s=e.enter(`codeFencedLang${o}`);f+=c.move(e.safe(n.lang,{before:f,after:" ",encode:["`"],...c.current()})),s()}if(n.lang&&n.meta){const s=e.enter(`codeFencedMeta${o}`);f+=c.move(" "),f+=c.move(e.safe(n.meta,{before:f,after:`
`,encode:["`"],...c.current()})),s()}return f+=c.move(`
`),u&&(f+=c.move(u+`
`)),f+=c.move(a),l(),f}function Y(n,r,e){return(e?"":"    ")+n}function v(n){const r=n.options.quote||'"';if(r!=='"'&&r!=="'")throw new Error("Cannot serialize title with `"+r+"` for `options.quote`, expected `\"`, or `'`");return r}function ee(n,r,e,t){const i=v(e),u=i==='"'?"Quote":"Apostrophe",o=e.enter("definition");let c=e.enter("label");const a=e.createTracker(t);let l=a.move("[");return l+=a.move(e.safe(e.associationId(n),{before:l,after:"]",...a.current()})),l+=a.move("]: "),c(),!n.url||/[\0- \u007F]/.test(n.url)?(c=e.enter("destinationLiteral"),l+=a.move("<"),l+=a.move(e.safe(n.url,{before:l,after:">",...a.current()})),l+=a.move(">")):(c=e.enter("destinationRaw"),l+=a.move(e.safe(n.url,{before:l,after:n.title?" ":`
`,...a.current()}))),c(),n.title&&(c=e.enter(`title${u}`),l+=a.move(" "+i),l+=a.move(e.safe(n.title,{before:l,after:i,...a.current()})),l+=a.move(i),c()),o(),l}function ne(n){const r=n.options.emphasis||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize emphasis with `"+r+"` for `options.emphasis`, expected `*`, or `_`");return r}_.peek=re;function _(n,r,e,t){const i=ne(e),u=e.enter("emphasis"),o=e.createTracker(t);let c=o.move(i);return c+=o.move(e.containerPhrasing(n,{before:c,after:i,...o.current()})),c+=o.move(i),u(),c}function re(n,r,e){return e.options.emphasis||"*"}const L=function(n){if(n==null)return ce;if(typeof n=="string")return ie(n);if(typeof n=="object")return Array.isArray(n)?te(n):oe(n);if(typeof n=="function")return b(n);throw new Error("Expected function, string, or object as test")};function te(n){const r=[];let e=-1;for(;++e<n.length;)r[e]=L(n[e]);return b(t);function t(...i){let u=-1;for(;++u<r.length;)if(r[u].call(this,...i))return!0;return!1}}function oe(n){return b(r);function r(e){let t;for(t in n)if(e[t]!==n[t])return!1;return!0}}function ie(n){return b(r);function r(e){return e&&e.type===n}}function b(n){return r;function r(e,...t){return!!(e&&typeof e=="object"&&"type"in e&&n.call(this,e,...t))}}function ce(){return!0}const ue=!0,y=!1,ae="skip",le=function(n,r,e,t){typeof r=="function"&&typeof e!="function"&&(t=e,e=r,r=null);const i=L(r),u=t?-1:1;o(n,void 0,[])();function o(c,a,l){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(s,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})}return s;function s(){let h=[],p,d,m;if((!r||i(c,a,l[l.length-1]||null))&&(h=fe(e(c,l)),h[0]===y))return h;if(c.children&&h[0]!==ae)for(d=(t?c.children.length:-1)+u,m=l.concat(c);d>-1&&d<c.children.length;){if(p=o(c.children[d],d,m)(),p[0]===y)return p;d=typeof p[1]=="number"?p[1]:d+u}return h}}};function fe(n){return Array.isArray(n)?n:typeof n=="number"?[ue,n]:[n]}const se=function(n,r,e,t){typeof r=="function"&&typeof e!="function"&&(t=e,e=r,r=null),le(n,r,i,t);function i(u,o){const c=o[o.length-1];return e(u,c?c.children.indexOf(u):null,c)}},he={};function S(n,r){const e=he,t=typeof e.includeImageAlt=="boolean"?e.includeImageAlt:!0,i=typeof e.includeHtml=="boolean"?e.includeHtml:!0;return E(n,t,i)}function E(n,r,e){if(pe(n)){if("value"in n)return n.type==="html"&&!e?"":n.value;if(r&&"alt"in n&&n.alt)return n.alt;if("children"in n)return B(n.children,r,e)}return Array.isArray(n)?B(n,r,e):""}function B(n,r,e){const t=[];let i=-1;for(;++i<n.length;)t[i]=E(n[i],r,e);return t.join("")}function pe(n){return!!(n&&typeof n=="object")}function j(n,r){let e=!1;return se(n,t=>{if("value"in t&&/\r?\n|\r/.test(t.value)||t.type==="break")return e=!0,y}),!!((!n.depth||n.depth<3)&&S(n)&&(r.options.setext||e))}function de(n,r,e,t){const i=Math.max(Math.min(6,n.depth||1),1),u=e.createTracker(t);if(j(n,e)){const f=e.enter("headingSetext"),s=e.enter("phrasing"),h=e.containerPhrasing(n,{...u.current(),before:`
`,after:`
`});return s(),f(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(i),c=e.enter("headingAtx"),a=e.enter("phrasing");u.move(o+" ");let l=e.containerPhrasing(n,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(l)&&(l="&#x"+l.charCodeAt(0).toString(16).toUpperCase()+";"+l.slice(1)),l=l?o+" "+l:o,e.options.closeAtx&&(l+=" "+o),a(),c(),l}P.peek=me;function P(n){return n.value||""}function me(){return"<"}R.peek=ke;function R(n,r,e,t){const i=v(e),u=i==='"'?"Quote":"Apostrophe",o=e.enter("image");let c=e.enter("label");const a=e.createTracker(t);let l=a.move("![");return l+=a.move(e.safe(n.alt,{before:l,after:"]",...a.current()})),l+=a.move("]("),c(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(c=e.enter("destinationLiteral"),l+=a.move("<"),l+=a.move(e.safe(n.url,{before:l,after:">",...a.current()})),l+=a.move(">")):(c=e.enter("destinationRaw"),l+=a.move(e.safe(n.url,{before:l,after:n.title?" ":")",...a.current()}))),c(),n.title&&(c=e.enter(`title${u}`),l+=a.move(" "+i),l+=a.move(e.safe(n.title,{before:l,after:i,...a.current()})),l+=a.move(i),c()),l+=a.move(")"),o(),l}function ke(){return"!"}T.peek=ge;function T(n,r,e,t){const i=n.referenceType,u=e.enter("imageReference");let o=e.enter("label");const c=e.createTracker(t);let a=c.move("![");const l=e.safe(n.alt,{before:a,after:"]",...c.current()});a+=c.move(l+"]["),o();const f=e.stack;e.stack=[],o=e.enter("reference");const s=e.safe(e.associationId(n),{before:a,after:"]",...c.current()});return o(),e.stack=f,u(),i==="full"||!l||l!==s?a+=c.move(s+"]"):i==="shortcut"?a=a.slice(0,-1):a+=c.move("]"),a}function ge(){return"!"}function z(n){if(!n._compiled){const r=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((r?"("+r+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}$.peek=be;function $(n,r,e){let t=n.value||"",i="`",u=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(t);)i+="`";for(/[^ \r\n]/.test(t)&&(/^[ \r\n]/.test(t)&&/[ \r\n]$/.test(t)||/^`|`$/.test(t))&&(t=" "+t+" ");++u<e.unsafe.length;){const o=e.unsafe[u],c=z(o);let a;if(o.atBreak)for(;a=c.exec(t);){let l=a.index;t.charCodeAt(l)===10&&t.charCodeAt(l-1)===13&&l--,t=t.slice(0,l)+" "+t.slice(a.index+1)}}return i+t+i}function be(){return"`"}function M(n,r){const e=S(n);return!!(!r.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(e===n.url||"mailto:"+e===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}q.peek=xe;function q(n,r,e,t){const i=v(e),u=i==='"'?"Quote":"Apostrophe",o=e.createTracker(t);let c,a;if(M(n,e)){const f=e.stack;e.stack=[],c=e.enter("autolink");let s=o.move("<");return s+=o.move(e.containerPhrasing(n,{before:s,after:">",...o.current()})),s+=o.move(">"),c(),e.stack=f,s}c=e.enter("link"),a=e.enter("label");let l=o.move("[");return l+=o.move(e.containerPhrasing(n,{before:l,after:"](",...o.current()})),l+=o.move("]("),a(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(a=e.enter("destinationLiteral"),l+=o.move("<"),l+=o.move(e.safe(n.url,{before:l,after:">",...o.current()})),l+=o.move(">")):(a=e.enter("destinationRaw"),l+=o.move(e.safe(n.url,{before:l,after:n.title?" ":")",...o.current()}))),a(),n.title&&(a=e.enter(`title${u}`),l+=o.move(" "+i),l+=o.move(e.safe(n.title,{before:l,after:i,...o.current()})),l+=o.move(i),a()),l+=o.move(")"),c(),l}function xe(n,r,e){return M(n,e)?"<":"["}G.peek=we;function G(n,r,e,t){const i=n.referenceType,u=e.enter("linkReference");let o=e.enter("label");const c=e.createTracker(t);let a=c.move("[");const l=e.containerPhrasing(n,{before:a,after:"]",...c.current()});a+=c.move(l+"]["),o();const f=e.stack;e.stack=[],o=e.enter("reference");const s=e.safe(e.associationId(n),{before:a,after:"]",...c.current()});return o(),e.stack=f,u(),i==="full"||!l||l!==s?a+=c.move(s+"]"):i==="shortcut"?a=a.slice(0,-1):a+=c.move("]"),a}function we(){return"["}function C(n){const r=n.options.bullet||"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bullet`, expected `*`, `+`, or `-`");return r}function ye(n){const r=C(n),e=n.options.bulletOther;if(!e)return r==="*"?"-":"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(e===r)throw new Error("Expected `bullet` (`"+r+"`) and `bulletOther` (`"+e+"`) to be different");return e}function N(n){const r=n.options.bulletOrdered||".";if(r!=="."&&r!==")")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOrdered`, expected `.` or `)`");return r}function ve(n){const r=N(n),e=n.options.bulletOrderedOther;if(!e)return r==="."?")":".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrderedOther`, expected `*`, `+`, or `-`");if(e===r)throw new Error("Expected `bulletOrdered` (`"+r+"`) and `bulletOrderedOther` (`"+e+"`) to be different");return e}function U(n){const r=n.options.rule||"*";if(r!=="*"&&r!=="-"&&r!=="_")throw new Error("Cannot serialize rules with `"+r+"` for `options.rule`, expected `*`, `-`, or `_`");return r}function Ce(n,r,e,t){const i=e.enter("list"),u=e.bulletCurrent;let o=n.ordered?N(e):C(e);const c=n.ordered?ve(e):ye(e),a=e.bulletLastUsed;let l=!1;if(r&&(n.ordered?e.options.bulletOrderedOther:e.options.bulletOther)&&a&&o===a&&(l=!0),!n.ordered){const s=n.children?n.children[0]:void 0;if((o==="*"||o==="-")&&s&&(!s.children||!s.children[0])&&e.stack[e.stack.length-1]==="list"&&e.stack[e.stack.length-2]==="listItem"&&e.stack[e.stack.length-3]==="list"&&e.stack[e.stack.length-4]==="listItem"&&e.indexStack[e.indexStack.length-1]===0&&e.indexStack[e.indexStack.length-2]===0&&e.indexStack[e.indexStack.length-3]===0&&(l=!0),U(e)===o&&s){let h=-1;for(;++h<n.children.length;){const p=n.children[h];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=c),e.bulletCurrent=o;const f=e.containerFlow(n,t);return e.bulletLastUsed=o,e.bulletCurrent=u,i(),f}function Ae(n){const r=n.options.listItemIndent||"tab";if(r===1||r==="1")return"one";if(r!=="tab"&&r!=="one"&&r!=="mixed")throw new Error("Cannot serialize items with `"+r+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return r}function Fe(n,r,e,t){const i=Ae(e);let u=e.bulletCurrent||C(e);r&&r.type==="list"&&r.ordered&&(u=(typeof r.start=="number"&&r.start>-1?r.start:1)+(e.options.incrementListMarker===!1?0:r.children.indexOf(n))+u);let o=u.length+1;(i==="tab"||i==="mixed"&&(r&&r.type==="list"&&r.spread||n.spread))&&(o=Math.ceil(o/4)*4);const c=e.createTracker(t);c.move(u+" ".repeat(o-u.length)),c.shift(o);const a=e.enter("listItem"),l=e.indentLines(e.containerFlow(n,c.current()),f);return a(),l;function f(s,h,p){return h?(p?"":" ".repeat(o))+s:(p?u:u+" ".repeat(o-u.length))+s}}function Be(n,r,e,t){const i=e.enter("paragraph"),u=e.enter("phrasing"),o=e.containerPhrasing(n,t);return u(),i(),o}const Q=function(n){if(n==null)return Le;if(typeof n=="string")return _e(n);if(typeof n=="object")return Array.isArray(n)?Oe(n):Ie(n);if(typeof n=="function")return x(n);throw new Error("Expected function, string, or object as test")};function Oe(n){const r=[];let e=-1;for(;++e<n.length;)r[e]=Q(n[e]);return x(t);function t(...i){let u=-1;for(;++u<r.length;)if(r[u].call(this,...i))return!0;return!1}}function Ie(n){return x(r);function r(e){let t;for(t in n)if(e[t]!==n[t])return!1;return!0}}function _e(n){return x(r);function r(e){return e&&e.type===n}}function x(n){return r;function r(e,...t){return!!(e&&typeof e=="object"&&"type"in e&&n.call(this,e,...t))}}function Le(){return!0}const Se=Q(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","link","linkReference","strong","text"]);function Ee(n,r,e,t){return(n.children.some(o=>Se(o))?e.containerPhrasing:e.containerFlow).call(e,n,t)}function je(n){const r=n.options.strong||"*";if(r!=="*"&&r!=="_")throw new Error("Cannot serialize strong with `"+r+"` for `options.strong`, expected `*`, or `_`");return r}D.peek=Pe;function D(n,r,e,t){const i=je(e),u=e.enter("strong"),o=e.createTracker(t);let c=o.move(i+i);return c+=o.move(e.containerPhrasing(n,{before:c,after:i,...o.current()})),c+=o.move(i+i),u(),c}function Pe(n,r,e){return e.options.strong||"*"}function Re(n,r,e,t){return e.safe(n.value,t)}function Te(n){const r=n.options.ruleRepetition||3;if(r<3)throw new Error("Cannot serialize rules with repetition `"+r+"` for `options.ruleRepetition`, expected `3` or more");return r}function ze(n,r,e){const t=(U(e)+(e.options.ruleSpaces?" ":"")).repeat(Te(e));return e.options.ruleSpaces?t.slice(0,-1):t}const $e={blockquote:W,break:F,code:V,definition:ee,emphasis:_,hardBreak:F,heading:de,html:P,image:R,imageReference:T,inlineCode:$,link:q,linkReference:G,list:Ce,listItem:Fe,paragraph:Be,root:Ee,strong:D,text:Re,thematicBreak:ze},Me=[qe];function qe(n,r,e,t){if(r.type==="code"&&w(r,t)&&(n.type==="list"||n.type===r.type&&w(n,t))||n.type==="list"&&n.type===r.type&&!!n.ordered==!!r.ordered&&!(n.ordered?t.options.bulletOrderedOther:t.options.bulletOther))return!1;if("spread"in e&&typeof e.spread=="boolean")return n.type==="paragraph"&&(n.type===r.type||r.type==="definition"||r.type==="heading"&&j(r,t))?void 0:e.spread?1:0}const k=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Ge=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:k},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:k},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:k},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:k},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:k},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:k},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:k},{atBreak:!0,character:"~"}];function Ne(n,r){const e=Number.parseInt(n,r);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"�":String.fromCharCode(e)}const Ue=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Qe(n){return n.replace(Ue,De)}function De(n,r,e){if(r)return r;if(e.charCodeAt(0)===35){const i=e.charCodeAt(1),u=i===120||i===88;return Ne(e.slice(u?2:1),u?16:10)}return H(e)||n}function Ze(n){return n.label||!n.identifier?n.label||"":Qe(n.identifier)}function He(n,r,e){const t=r.indexStack,i=n.children||[],u=[];let o=-1,c=e.before;t.push(-1);let a=r.createTracker(e);for(;++o<i.length;){const l=i[o];let f;if(t[t.length-1]=o,o+1<i.length){let s=r.handle.handlers[i[o+1].type];s&&s.peek&&(s=s.peek),f=s?s(i[o+1],n,r,{before:"",after:"",...a.current()}).charAt(0):""}else f=e.after;u.length>0&&(c==="\r"||c===`
`)&&l.type==="html"&&(u[u.length-1]=u[u.length-1].replace(/(\r?\n|\r)$/," "),c=" ",a=r.createTracker(e),a.move(u.join(""))),u.push(a.move(r.handle(l,n,r,{...a.current(),before:c,after:f}))),c=u[u.length-1].slice(-1)}return t.pop(),u.join("")}function Ke(n,r,e){const t=r.indexStack,i=n.children||[],u=r.createTracker(e),o=[];let c=-1;for(t.push(-1);++c<i.length;){const a=i[c];t[t.length-1]=c,o.push(u.move(r.handle(a,n,r,{before:`
`,after:`
`,...u.current()}))),a.type!=="list"&&(r.bulletLastUsed=void 0),c<i.length-1&&o.push(u.move(We(a,i[c+1],n,r)))}return t.pop(),o.join("")}function We(n,r,e,t){let i=t.join.length;for(;i--;){const u=t.join[i](n,r,e,t);if(u===!0||u===1)break;if(typeof u=="number")return`
`.repeat(1+u);if(u===!1)return`

<!---->

`}return`

`}const Xe=/\r?\n|\r/g;function Je(n,r){const e=[];let t=0,i=0,u;for(;u=Xe.exec(n);)o(n.slice(t,u.index)),e.push(u[0]),t=u.index+u[0].length,i++;return o(n.slice(t)),e.join("");function o(c){e.push(r(c,i,!c))}}function Ve(n,r,e){const t=(e.before||"")+(r||"")+(e.after||""),i=[],u=[],o={};let c=-1;for(;++c<n.unsafe.length;){const f=n.unsafe[c];if(!I(n.stack,f))continue;const s=z(f);let h;for(;h=s.exec(t);){const p="before"in f||!!f.atBreak,d="after"in f,m=h.index+(p?h[1].length:0);i.includes(m)?(o[m].before&&!p&&(o[m].before=!1),o[m].after&&!d&&(o[m].after=!1)):(i.push(m),o[m]={before:p,after:d})}}i.sort(Ye);let a=e.before?e.before.length:0;const l=t.length-(e.after?e.after.length:0);for(c=-1;++c<i.length;){const f=i[c];f<a||f>=l||f+1<l&&i[c+1]===f+1&&o[f].after&&!o[f+1].before&&!o[f+1].after||i[c-1]===f-1&&o[f].before&&!o[f-1].before&&!o[f-1].after||(a!==f&&u.push(O(t.slice(a,f),"\\")),a=f,/[!-/:-@[-`{-~]/.test(t.charAt(f))&&(!e.encode||!e.encode.includes(t.charAt(f)))?u.push("\\"):(u.push("&#x"+t.charCodeAt(f).toString(16).toUpperCase()+";"),a++))}return u.push(O(t.slice(a,l),e.after)),u.join("")}function Ye(n,r){return n-r}function O(n,r){const e=/\\(?=[!-/:-@[-`{-~])/g,t=[],i=[],u=n+r;let o=-1,c=0,a;for(;a=e.exec(u);)t.push(a.index);for(;++o<t.length;)c!==t[o]&&i.push(n.slice(c,t[o])),i.push("\\"),c=t[o];return i.push(n.slice(c)),i.join("")}function en(n){const r=n||{},e=r.now||{};let t=r.lineShift||0,i=e.line||1,u=e.column||1;return{move:a,current:o,shift:c};function o(){return{now:{line:i,column:u},lineShift:t}}function c(l){t+=l}function a(l){const f=l||"",s=f.split(/\r?\n|\r/g),h=s[s.length-1];return i+=s.length-1,u=s.length===1?u+h.length:1+h.length+t,f}}function nn(n,r={}){const e={enter:i,indentLines:Je,associationId:Ze,containerPhrasing:cn,containerFlow:un,createTracker:en,safe:an,stack:[],unsafe:[],join:[],handlers:{},options:{},indexStack:[],handle:void 0};g(e,{unsafe:Ge,join:Me,handlers:$e}),g(e,r),e.options.tightDefinitions&&g(e,{join:[on]}),e.handle=K("type",{invalid:rn,unknown:tn,handlers:e.handlers});let t=e.handle(n,void 0,e,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return t&&t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t;function i(u){return e.stack.push(u),o;function o(){e.stack.pop()}}}function rn(n){throw new Error("Cannot handle value `"+n+"`, expected node")}function tn(n){throw new Error("Cannot handle unknown node `"+n.type+"`")}function on(n,r){if(n.type==="definition"&&n.type===r.type)return 0}function cn(n,r){return He(n,this,r)}function un(n,r){return Ke(n,this,r)}function an(n,r){return Ve(this,n,r)}function fn(n){Object.assign(this,{Compiler:e=>{const t=this.data("settings");return nn(e,Object.assign({},t,n,{extensions:this.data("toMarkdownExtensions")||[]}))}})}export{fn as default};
